ol.control.MapScale=function(){function b(d){d||(d={});var g=d.className!==undefined?d.className:"ol-map-scale";var e=document.createElement("div");e.classList.add(g);var h=document.createElement("div");e.appendChild(h);this.scaleLine_=new ol.control.ScaleLine({target:h,className:"ol-map-scale-line"});this.scaleValue_=document.createElement("div");this.scaleValue_.classList.add(g+"-value");e.appendChild(this.scaleValue_);this.viewState_=null;var f=d.render!==undefined?d.render:b.render;ol.control.Control.call(this,{element:e,render:f,target:d.target});this.scaleLine_.on("change:units",this.handleUnitsChanged_,this)}ol.inherits(b,ol.control.Control);b.render=function(e){var d=e.frameState;if(d==null){this.viewState_=null}else{this.viewState_=d.viewState}this.updateElement_()};b.DOTS_PER_INCH=90.7;b.INCHES_PER_METER=39.37;b.prototype.handleUnitsChanged_=function(){this.updateElement_()};b.prototype.setMap=function(d){this.scaleLine_.setMap(d);ol.control.Control.prototype.setMap.call(this,d)};b.prototype.updateElement_=function(){var g=this.viewState_,e,f,d,i,h;if(g){f=g.resolution;d=g.projection;i=d.getMetersPerUnit()*f;h=Math.round(i*b.DOTS_PER_INCH*b.INCHES_PER_METER);this.scaleValue_.innerHTML="1 : "+a(h)}};function c(){if(!document){return}var e=document.createElement("div"),d;e.style.width="1in";e.style.height="1in";e.style.position="fixed";e.style.left="-100%";document.body.appendChild(e);d=e.offsetWidth;document.body.removeChild(e);return d}function a(f,h){var e=["k","M","G"],d;for(var g=e.length-1;g>=0;g--){d=Math.pow(1000,g+1);if(f<=-d||f>=d){return +(f/d).toFixed(h||0)+e[g]}}return f}return b}();